## 浏览器缓存策略
> 浏览器缓存策略是指浏览器在向服务器发起请求获取文件时，会根据不同的策略来获取文件
### 强缓存
> 强缓存是指在浏览器请求文件时，不去请求服务器，而直接从浏览器缓存中获取文件，强缓存有以下两种方式：
* **cache-control**
	* 这种方式在浏览器第一次访问服务器请求文件时，服务器会在响应头里添加缓存的选项，例如max-age代表缓存的时间，浏览器接收到后就会将文件缓存在本地，若下次再请求这个文件并且未超过文件的缓存时间，则会命中强缓存并直接从浏览器中读取缓存，而不请求服务器。
* **Expires**
	* 这种方式与cache-control差不多，区别在于Expires的值是一个绝对时间，没有缓存选项，可以通过修改本地时间来使缓存失效，并且Expires是http1.0协议产生的，而cahe-control是在http1.1协议中产生的，cache-control的优先级大于Expires，只有在不支持http1.1协议的时候Expires才会起到一个兼容性的作用。
* 强缓存的方式，只要在请求文件时未超出设置的缓存时间，就会直接从浏览器缓存中取出文件，这样会导致如果文件在缓存时间内发生了改变，那么浏览器就拿不到最新的文件。
### 协商缓存
> 协商缓存同样也是在浏览器请求文件时，从浏览器缓存中获取文件。与强缓存不同的是，协商缓存会向服务器发出请求判断当前文件是否更新，再进行下一步的调整。协商缓存有以下两种方式：
* **last-modified和if-modified-since**
	* 当浏览器第一次向服务器发起请求时，服务器会在响应头上加入一个last-modified，其内容就是最后一次修改文件的时间戳，当浏览器再次请求文件时，会在请求头上添加一个if-modified-since字段，内容就是last-modified时间戳。服务器拿到请求中的这个字段后用这个时间戳和服务器上更新文件的时间比对，若时间相同，则说明文件未更新，浏览器可以从缓存中获取文件，于是返回304。如果不一致，则返回200以及新的文件，浏览器拿到后将新的文件再重新缓存。
	* 这种方式浏览器无法判断文件是否真的被修改，即使是打开了文件也会造成last-modified的值更新，就会造成即使未改变文件也要重新从服务器上获取文件。
* **ETag和if-none-match**
	* 以这种方式第一次发起请求时，服务器会根据文件生成一个唯一的hash值放入到响应头的ETag字段中返回给浏览器，一旦文件发生改变则ETag的值就会改变。
	* 当再次发起请求获取文件时，就会将ETag的值放入到请求头if-none-match字段中，服务器根据这个值进行比对，看文件是否更新，返回对应的结果。
	* 这种方式相较于last-modified更加具有精准性，但性能上要稍差些，ETag的优先级更高。