## TCP
* **三次握手**
	* 浏览器首先向服务器发送一个SYN = 1的标志号以及seq =x，x为随机值，同时浏览器状态变为SYN_SEND，表示想要与服务器建立连接。
	* 服务器接收到后，发送一个SYN = 1和ACK = 1标志号，同时生成一个seq = y，y为随机值，一个ack = x + 1，服务器状态变为SYN_REVD,表示同意并准备好与浏览器建立连接。
	* 浏览器接收到后，查看ack是否为之前所发的seq值加1，若验证通过则发送一个ACK = 1标志号，以及一个ack = y + 1，状态变为ESTABLISHED，服务器接收到后状态也变为ESTABLISHED，表示已经建立了连接。
* **四次挥手**
  * 浏览器向浏览器发送一个FIN = 1标志号，以及一个seq = p，p为随机值，浏览器状态变为FIN-WAIT-1,表示想要与服务器断开连接。
  * 服务器接收到后，发送一个ACK = 1标志号，一个ack = p + 1，服务器进入CLOSE-WAIT状态，表示服务器知晓了想要断开连接，但是还有数据未传输完毕。
  * 浏览器接收到后，状态变为FIN-WAIT-2
  * 等到数据传输完毕后，再发送一个FIN = 1标志号、一个ACK = 1标志号、一个seq = q，q为随机值、一个ack = p + 1，状态变为LAST-ACK，表示数据已经传输完毕，最后确认。
  * 浏览器接收到后，发送一个ACK = 1标志号、一个ack = q + 1。进入TIME-WAIT状态，服务器接收到后状态变为CLOSED
* 三次握手中的第三次握手也不能省略，因为若只需两次握手就可以建立连接，那么如果浏览器发出的建立连接的请求因为某种原因被滞留了，等到连接失效了才发送到服务器端，服务器端发送同意建立连接的报文，那么此时连接就建立了，但浏览器端并不知道连接建立了，并不会发送请求，而服务器端却会一直等待客户端发送请求，造成死锁。
* 四次挥手中的第二次和第三次挥手不能合并为一次挥手，因为当这两次挥手合并后，当浏览器发送FIN标志号时，服务器会等数据传输完成后才发出响应，而此时浏览器迟迟接收不到服务器的响应，就会以为服务器未接收到之前到报文，从而导致浏览器不断的重发报文。
* 浏览器端的TIME-WAIT状态需要等待两个MSL（最大分段寿命），等待的目的是为了确保服务器能够拿到ACK报文，如果浏览器发出ACK标志号后不进行等待，若服务器未拿到ACK报文，会以为浏览器未收到之前的FIN ACK标志号，就会进行重发，而此时浏览器已经关闭连接，收到一个在连接之外的报文后就会发送一个响应RST包，服务器接收到后会导致异常响应。

